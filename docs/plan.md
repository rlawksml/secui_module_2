# 개발 계획서 (Development Plan)

## 프로젝트 개요
뱀파이어 서바이벌류 탑다운 슈팅 게임 - Three.js + Vite 기반

## 개발 단계

### Phase 1: 기본 구조 설정 ✓
**목표**: 프로젝트 초기 설정 및 기본 구조 구축
- [x] Three.js + Vite 환경 설정
- [x] 기본 파일 구조 생성
- [x] HTML/CSS UI 레이아웃 구현
- [x] 게임 루프 및 렌더링 파이프라인 구축

### Phase 2: 핵심 엔티티 구현
**목표**: 플레이어, 적, 발사체, 경험치 오브 구현
- [x] Player 클래스 구현
  - 이동, 체력, 레벨 시스템
  - WASD/방향키 입력 처리
  - 화면 경계 제한
- [x] Enemy 클래스 구현
  - 플레이어 추적 AI
  - 체력 시스템
- [x] Projectile 클래스 구현
  - 자동 타겟팅
  - 관통 시스템
- [x] ExperienceOrb 클래스 구현
  - 자석 효과
  - 수집 메커니즘

### Phase 3: 게임 시스템 구현
**목표**: 스폰, 전투, 레벨 시스템 완성
- [x] SpawnSystem 구현
  - 난이도 스케일링 (분당 20% 증가)
  - 화면 밖 스폰 로직
  - 최대 적 제한
- [x] CombatSystem 구현
  - 자동 공격 시스템
  - 충돌 감지
  - 접촉 데미지
- [x] LevelSystem 구현
  - 경험치 계산 공식
  - 레벨업 보너스

### Phase 4: UI 및 게임 상태 (다음 단계)
**목표**: 사용자 인터페이스 완성 및 게임 상태 관리
- [ ] HUD 동적 업데이트 테스트
- [ ] 레벨업 애니메이션 개선
- [ ] 게임 오버 화면 개선
- [ ] 일시정지 기능 추가
- [ ] 설정 메뉴 추가

### Phase 5: 성능 최적화
**목표**: 60 FPS 안정화 및 메모리 관리
- [ ] 오브젝트 풀링 구현
  - 발사체 풀
  - 적 풀
  - 경험치 오브 풀
- [ ] 공간 분할 최적화
  - 쿼드트리 또는 그리드 기반 충돌 감지
- [ ] 컬링 시스템 구현
  - 화면 밖 엔티티 렌더링 스킵
- [ ] 메모리 프로파일링 및 최적화

### Phase 6: 콘텐츠 확장
**목표**: 게임플레이 다양화
- [ ] 추가 무기 타입 구현
- [ ] 파워업 시스템
- [ ] 보스 적 추가
- [ ] 다양한 적 타입
- [ ] 업그레이드 선택 시스템
- [ ] 파티클 효과
- [ ] 사운드 효과 및 배경음악

### Phase 7: 테스트 및 밸런싱
**목표**: 게임 완성도 향상
- [ ] 성능 테스트 (100+ 적, 50+ 발사체)
- [ ] 10분+ 장기 플레이 테스트
- [ ] 난이도 곡선 조정
- [ ] 버그 수정
- [ ] 크로스 브라우저 테스트

### Phase 8: 프로덕션 준비
**목표**: 배포 준비
- [ ] 프로덕션 빌드 최적화
- [ ] 애셋 압축 및 최적화
- [ ] 로딩 화면 추가
- [ ] 분석 및 에러 트래킹 설정
- [ ] 문서화 완성

## 우선순위

### 높음 (High Priority)
1. 기본 게임플레이 완성
2. 성능 최적화 (오브젝트 풀링)
3. 충돌 감지 최적화

### 중간 (Medium Priority)
1. UI/UX 개선
2. 추가 무기 타입
3. 파티클 효과

### 낮음 (Low Priority)
1. 사운드 효과
2. 고급 애니메이션
3. 추가 게임 모드

## 기술 스택 세부사항

### 의존성
```json
{
  "dependencies": {
    "three": "^0.160.0"
  },
  "devDependencies": {
    "vite": "^5.0.0",
    "eslint": "^8.0.0",
    "prettier": "^3.0.0",
    "vitest": "^1.0.0"
  }
}
```

### 개발 환경
- Node.js 18+
- npm 또는 yarn
- 모던 브라우저 (Chrome, Firefox, Edge)

## 예상 일정
- Phase 1-3: 기본 구현 (완료)
- Phase 4-5: UI 및 최적화 (1-2주)
- Phase 6: 콘텐츠 확장 (2-3주)
- Phase 7-8: 테스트 및 배포 (1주)

## 리스크 및 대응 방안

### 리스크 1: 성능 문제
- **대응**: 초기부터 오브젝트 풀링 및 공간 분할 구현
- **모니터링**: FPS 및 메모리 사용량 실시간 추적

### 리스크 2: 충돌 감지 병목
- **대응**: 쿼드트리/그리드 기반 공간 분할 적용
- **대체안**: Web Workers를 이용한 병렬 처리

### 리스크 3: Three.js 학습 곡선
- **대응**: 2D 게임에 필요한 기능만 선택적으로 사용
- **문서**: Three.js 공식 문서 및 예제 참조

## 성공 지표
- [ ] 100개 이상의 적과 50개 이상의 발사체를 60 FPS로 처리
- [ ] 10분 이상 플레이 시 메모리 누수 없음
- [ ] 초기 로딩 시간 2초 이하
- [ ] 메모리 사용량 100MB 이하

## 참고 자료
- Three.js 공식 문서: https://threejs.org/docs/
- Vite 공식 문서: https://vitejs.dev/
- 게임 최적화 가이드: [내부 링크 추가 예정]
